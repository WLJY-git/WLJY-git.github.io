<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>üíó Áà±ÂøÉÂä®Áîª</title>
    <style>
        canvas {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, .2);
        }
        html, body {
            height: 100%;
            padding: 0;
            margin: 0;
            background: #000;
            overflow: hidden;
        }

        /* Áà±ÂøÉË∑≥Âä®Âä®Áîª */
        #heart, #pinkboard1, #pinkboard2 {
            animation: heartBeat 1.5s ease-in-out infinite;
        }
        @keyframes heartBeat {
            0% { transform: scale(0.9); }
            50% { transform: scale(1.1); }
            100% { transform: scale(0.9); }
        }

        .heart-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ff3366;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 51, 102, 0.8);
            z-index: 10;
            animation: bounce 1.5s ease-in-out infinite;
        }
        @keyframes bounce {
            0%, 100% { transform: translate(-50%, -50%) scale(0.9); opacity: 0.8; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 1; }
        }

        .music-btn {
            position: fixed;
            top: 25%;
            right: 10px;
            width: 30px;
            height: 30px;
            z-index: 996;
            background: #696969;
            border-radius: 50%;
            padding: 1px;
            text-align: center;
            color: #ddd;
            text-decoration: none;
            line-height: 30px;
            font-size: 11px;
            cursor: pointer;
        }
        .music-tip {
            position: fixed;
            top: 30%;
            right: 5px;
            color: #ddd;
            font-size: 11px;
            z-index: 996;
        }
    </style>
</head>
<body>
    <a class="music-btn" onclick="toggleMusic()">Êí≠Êîæ</a>
    <div class="heart-text">ÂÆùË¥ùÔºåÁ•ù‰Ω†Êñ∞ÊÉ≥‰∫ãÊô®Âñî</div>
    <canvas id="heart"></canvas>
    <canvas id="pinkboard1"></canvas>
    <canvas id="stars"></canvas>
    <canvas id="pinkboard2"></canvas>
    <canvas id="canvas"></canvas>

    <script>
    // ÂàõÂª∫Èü≥È¢ëÂØπË±°ÔºàÊõøÊç¢‰∏∫‰Ω†ÁöÑÊú¨Âú∞Ë∑ØÂæÑÔºâ
        const music = new Audio('audio.mp3');
        music.loop = true;
        // Ëé∑ÂèñÊåâÈíÆÂÖÉÁ¥†
        const btn = document.querySelector('a[onclick="toggleMusic()"]');

        // ÂàáÊç¢Êí≠Êîæ/ÊöÇÂÅú
        function toggleMusic() {
            if (music.paused) {
                music.play().then(() => {
                    btn.textContent = "ÊöÇÂÅú";
                }).catch(err => {
                    alert("Êí≠ÊîæÂ§±Ë¥•Ôºö" + err.message);
                });
            } else {
                music.pause();
                btn.textContent = "Êí≠Êîæ";
            }
        }

        // Á¨¨‰∏Ä‰∏™Áà±ÂøÉÂä®Áîª
        window.requestAnimationFrame = window.__requestAnimationFrame || window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || (function () {
            return function (callback, element) {
                var lastTime = element.__lastTime;
                if (lastTime === undefined) lastTime = 0;
                var currTime = Date.now();
                var timeToCall = Math.max(1, 33 - (currTime - lastTime));
                window.setTimeout(callback, timeToCall);
                element.__lastTime = currTime + timeToCall;
            };
        })();

        window.isDevice = (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(((navigator.userAgent || navigator.vendor || window.opera)).toLowerCase()));
        var loaded = false;
        var init = function () {
            if (loaded) return;
            loaded = true;
            var mobile = window.isDevice;
            var koef = mobile ? 0.5 : 1;
            var canvas = document.getElementById('heart');
            var ctx = canvas.getContext('2d');
            var width = canvas.width = koef * innerWidth;
            var height = canvas.height = koef * innerHeight;
            var rand = Math.random;
            ctx.fillStyle = "rgba(0,0,0,1)";
            ctx.fillRect(0, 0, width, height);

            var heartPosition = function (rad) {
                return [Math.pow(Math.sin(rad), 3), -(15 * Math.cos(rad) - 5 * Math.cos(2 * rad) - 2 * Math.cos(3 * rad) - Math.cos(4 * rad))];
            };
            var scaleAndTranslate = function (pos, sx, sy, dx, dy) {
                return [dx + pos[0] * sx, dy + pos[1] * sy];
            };

            window.addEventListener('resize', function () {
                width = canvas.width = koef * innerWidth;
                height = canvas.height = koef * innerHeight;
                ctx.fillStyle = "rgba(0,0,0,1)";
                ctx.fillRect(0, 0, width, height);
            });

            var traceCount = mobile ? 20 : 50;
            var pointsOrigin = [];
            var i;
            var dr = mobile ? 0.3 : 0.1;
            for (i = 0; i < Math.PI * 2; i += dr) pointsOrigin.push(scaleAndTranslate(heartPosition(i), 210, 13, 0, 0));
            for (i = 0; i < Math.PI * 2; i += dr) pointsOrigin.push(scaleAndTranslate(heartPosition(i), 150, 9, 0, 0));
            for (i = 0; i < Math.PI * 2; i += dr) pointsOrigin.push(scaleAndTranslate(heartPosition(i), 90, 5, 0, 0));
            var heartPointsCount = pointsOrigin.length;

            var targetPoints = [];
            var pulse = function (kx, ky) {
                for (i = 0; i < pointsOrigin.length; i++) {
                    targetPoints[i] = [];
                    targetPoints[i][0] = kx * pointsOrigin[i][0] + width / 2;
                    targetPoints[i][1] = ky * pointsOrigin[i][1] + height / 2;
                }
            };

            var e = [];
            for (i = 0; i < heartPointsCount; i++) {
                var x = rand() * width;
                var y = rand() * height;
                e[i] = {
                    vx: 0,
                    vy: 0,
                    R: 2,
                    speed: rand() + 5,
                    q: ~~(rand() * heartPointsCount),
                    D: 2 * (i % 2) - 1,
                    force: 0.2 * rand() + 0.7,
                    f: "hsla(330," + ~~(70 * rand() + 90) + "%," + ~~(50 * rand() + 40) + "%,.8)",
                    trace: []
                };
                for (var k = 0; k < traceCount; k++) e[i].trace[k] = { x: x, y: y };
            }

            var config = { traceK: 0.4, timeDelta: 0.01 };
            var time = 0;
            var loop = function () {
                var n = -Math.cos(time);
                pulse((1 + n) * .5, (1 + n) * .5);
                time += ((Math.sin(time)) < 0 ? 9 : (n > 0.8) ? .2 : 1) * config.timeDelta;
                ctx.fillStyle = "rgba(0,0,0,.1)";
                ctx.fillRect(0, 0, width, height);
                for (i = e.length; i--;) {
                    var u = e[i];
                    var q = targetPoints[u.q];
                    var dx = u.trace[0].x - q[0];
                    var dy = u.trace[0].y - q[1];
                    var length = Math.sqrt(dx * dx + dy * dy);
                    if (10 > length) {
                        if (0.95 < rand()) {
                            u.q = ~~(rand() * heartPointsCount);
                        } else {
                            if (0.99 < rand()) u.D *= -1;
                            u.q += u.D;
                            u.q %= heartPointsCount;
                            if (0 > u.q) u.q += heartPointsCount;
                        }
                    }
                    u.vx += -dx / length * u.speed;
                    u.vy += -dy / length * u.speed;
                    u.trace[0].x += u.vx;
                    u.trace[0].y += u.vy;
                    u.vx *= u.force;
                    u.vy *= u.force;
                    for (k = 0; k < u.trace.length - 1;) {
                        var T = u.trace[k];
                        var N = u.trace[++k];
                        N.x -= config.traceK * (N.x - T.x);
                        N.y -= config.traceK * (N.y - T.y);
                    }
                    ctx.fillStyle = u.f;
                    for (k = 0; k < u.trace.length; k++) {
                        ctx.fillRect(u.trace[k].x, u.trace[k].y, 1, 1);
                    }
                }
                ctx.fillStyle = "rgba(255,30,80,1)";
                for (i = (u ? u.trace.length : 0) + 13; i--;) ctx.fillRect(targetPoints[i][0], targetPoints[i][1], 2, 2);
                window.requestAnimationFrame(loop, canvas);
            };
            loop();
        };

        var s = document.readyState;
        if (s === 'complete' || s === 'loaded' || s === 'interactive') init();
        else document.addEventListener('DOMContentLoaded', init, false);

        // Á¨¨‰∫å‰∏™Áà±ÂøÉÂä®Áîª
        var settings1 = {
            particles: {
                length: 600,
                duration: 2,
                velocity: 100,
                effect: -0.75,
                size: 32,
            },
        };
        (function () { var b = 0; var c = ["ms", "moz", "webkit", "o"]; for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) { window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"]; window.cancelAnimationFrame = window[c[a] + "CancelAnimationFrame"] || window[c[a] + "CancelRequestAnimationFrame"] } if (!window.requestAnimationFrame) { window.requestAnimationFrame = function (h, e) { var d = new Date().getTime(); var f = Math.max(0, 16 - (d - b)); var g = window.setTimeout(function () { h(d + f) }, f); b = d + f; return g } } if (!window.cancelAnimationFrame) { window.cancelAnimationFrame = function (d) { clearTimeout(d) } } }());

        var Point1 = (function () {
            function Point1(x, y) {
                this.x = (typeof x !== 'undefined') ? x : 0;
                this.y = (typeof y !== 'undefined') ? y : 0;
            }
            Point1.prototype.clone = function () { return new Point1(this.x, this.y); };
            Point1.prototype.length = function (length) {
                if (typeof length == 'undefined') return Math.sqrt(this.x * this.x + this.y * this.y);
                this.normalize();
                this.x *= length;
                this.y *= length;
                return this;
            };
            Point1.prototype.normalize = function () {
                var length = this.length();
                this.x /= length;
                this.y /= length;
                return this;
            };
            return Point1;
        })();

        var Particle1 = (function () {
            function Particle1() {
                this.position = new Point1();
                this.velocity = new Point1();
                this.acceleration = new Point1();
                this.age = 0;
            }
            Particle1.prototype.initialize = function (x, y, dx, dy) {
                this.position.x = x;
                this.position.y = y;
                this.velocity.x = dx;
                this.velocity.y = dy;
                this.acceleration.x = dx * settings1.particles.effect;
                this.acceleration.y = dy * settings1.particles.effect;
                this.age = 0;
            };
            Particle1.prototype.update = function (deltaTime) {
                this.position.x += this.velocity.x * deltaTime;
                this.position.y += this.velocity.y * deltaTime;
                this.velocity.x += this.acceleration.x * deltaTime;
                this.velocity.y += this.acceleration.y * deltaTime;
                this.age += deltaTime;
            };
            Particle1.prototype.draw = function (context, image) {
                function ease(t) { return (--t) * t * t + 1; }
                var size = image.width * ease(this.age / settings1.particles.duration);
                context.globalAlpha = 1 - this.age / settings1.particles.duration;
                context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);
            };
            return Particle1;
        })();

        var ParticlePool1 = (function () {
            var particles, firstActive = 0, firstFree = 0, duration = settings1.particles.duration;
            function ParticlePool1(length) {
                particles = new Array(length);
                for (var i = 0; i < particles.length; i++) particles[i] = new Particle1();
            }
            ParticlePool1.prototype.add = function (x, y, dx, dy) {
                particles[firstFree].initialize(x, y, dx, dy);
                firstFree++;
                if (firstFree == particles.length) firstFree = 0;
                if (firstActive == firstFree) firstActive++;
                if (firstActive == particles.length) firstActive = 0;
            };
            ParticlePool1.prototype.update = function (deltaTime) {
                var i;
                if (firstActive < firstFree) for (i = firstActive; i < firstFree; i++) particles[i].update(deltaTime);
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++) particles[i].update(deltaTime);
                    for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);
                }
                while (particles[firstActive].age >= duration && firstActive != firstFree) {
                    firstActive++;
                    if (firstActive == particles.length) firstActive = 0;
                }
            };
            ParticlePool1.prototype.draw = function (context, image) {
                var i;
                if (firstActive < firstFree) for (i = firstActive; i < firstFree; i++) particles[i].draw(context, image);
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++) particles[i].draw(context, image);
                    for (i = 0; i < firstFree; i++) particles[i].draw(context, image);
                }
            };
            return ParticlePool1;
        })();

        (function (canvas) {
            var context = canvas.getContext('2d'),
                particles = new ParticlePool1(settings1.particles.length),
                particleRate = settings1.particles.length / settings1.particles.duration,
                time;

            function pointOnHeart(t) {
                return new Point1(
                    160 * Math.pow(Math.sin(t), 3),
                    130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25
                );
            }

            var image = (function () {
                var canvas = document.createElement('canvas'),
                    context = canvas.getContext('2d');
                canvas.width = settings1.particles.size;
                canvas.height = settings1.particles.size;
                function to(t) {
                    var point = pointOnHeart(t);
                    point.x = settings1.particles.size / 2 + point.x * settings1.particles.size / 350;
                    point.y = settings1.particles.size / 2 - point.y * settings1.particles.size / 350;
                    return point;
                }
                context.beginPath();
                var t = -Math.PI;
                var point = to(t);
                context.moveTo(point.x, point.y);
                while (t < Math.PI) {
                    t += 0.01;
                    point = to(t);
                    context.lineTo(point.x, point.y);
                }
                context.closePath();
                context.fillStyle = '#ff3366';
                context.fill();
                var image = new Image();
                image.src = canvas.toDataURL();
                return image;
            })();

            function render() {
                requestAnimationFrame(render);
                var newTime = new Date().getTime() / 1000,
                    deltaTime = newTime - (time || newTime);
                time = newTime;
                context.clearRect(0, 0, canvas.width, canvas.height);
                var amount = particleRate * deltaTime;
                for (var i = 0; i < amount; i++) {
                    var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
                    var dir = pos.clone().length(settings1.particles.velocity);
                    particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);
                }
                particles.update(deltaTime);
                particles.draw(context, image);
            }

            function onResize() {
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
            }
            window.onresize = onResize;
            setTimeout(function () {
                onResize();
                render();
            }, 10);
        })(document.getElementById('pinkboard1'));

        // ÊòüÊòüÂíåÊµÅÊòüÂä®Áîª
        var context;
        var arr = new Array();
        var starCount = 800;
        var rains = new Array();
        var rainCount = 20;

        function initStars() {
            var stars = document.getElementById("stars");
            windowWidth = window.innerWidth;
            stars.width = windowWidth;
            stars.height = window.innerHeight;
            context = stars.getContext("2d");
        }

        var Star = function () {
            this.x = windowWidth * Math.random();
            this.y = 5000 * Math.random();
            this.text = "‚ù§";
            this.color = "#ff3366";

            this.getColor = function () {
                var _r = Math.random();
                this.color = _r < 0.5 ? "#333" : "#ff3366";
            };

            this.init = function () { this.getColor(); };
            this.draw = function () {
                context.fillStyle = this.color;
                context.fillText(this.text, this.x, this.y);
            };
        };

        window.onload = function () {
            initStars();
            for (var i = 0; i < starCount; i++) {
                var star = new Star();
                star.init();
                star.draw();
                arr.push(star);
            }

            for (var i = 0; i < rainCount; i++) {
                var rain = new MeteorRain();
                rain.init();
                rain.draw();
                rains.push(rain);
            }

            playStars();
            playRains();
        };

        function playStars() {
            for (var n = 0; n < starCount; n++) {
                arr[n].getColor();
                arr[n].draw();
            }
            setTimeout("playStars()", 100);
        }

        var MeteorRain = function () {
            this.x = -1;
            this.y = -1;
            this.length = -1;
            this.angle = 30;
            this.width = -1;
            this.height = -1;
            this.speed = 1;
            this.offset_x = -1;
            this.offset_y = -1;
            this.alpha = 1;
            this.color1 = "#ff3366";
            this.color2 = "";

            this.init = function () {
                this.getPos();
                this.alpha = 1;
                this.getRandomColor();
                var x = Math.random() * 80 + 150;
                this.length = Math.ceil(x);
                this.angle = 30;
                x = Math.random() + 0.5;
                this.speed = Math.ceil(x);
                var cos = Math.cos(this.angle * 3.14 / 180);
                var sin = Math.sin(this.angle * 3.14 / 180);
                this.width = this.length * cos;
                this.height = this.length * sin;
                this.offset_x = this.speed * cos;
                this.offset_y = this.speed * sin;
            };

            this.getRandomColor = function () {
                var a = Math.ceil(255 - 240 * Math.random());
                this.color1 = "rgba(" + a + "," + a + "," + a + ",1)";
                this.color2 = "black";
            };

            this.countPos = function () {
                this.x = this.x - this.offset_x;
                this.y = this.y + this.offset_y;
            };

            this.getPos = function () {
                this.x = Math.random() * window.innerWidth;
                this.y = Math.random() * window.innerHeight;
            };

            this.draw = function () {
                context.save();
                context.beginPath();
                context.lineWidth = 1;
                context.globalAlpha = this.alpha;
                var line = context.createLinearGradient(this.x, this.y, this.x + this.width, this.y - this.height);
                line.addColorStop(0, "#ff3366");
                line.addColorStop(0.3, this.color1);
                line.addColorStop(0.6, this.color2);
                context.strokeStyle = line;
                context.moveTo(this.x, this.y);
                context.lineTo(this.x + this.width, this.y - this.height);
                context.closePath();
                context.stroke();
                context.restore();
            };

            this.move = function () {
                var x = this.x + this.width - this.offset_x;
                var y = this.y - this.height;
                context.clearRect(x - 3, y - 3, this.offset_x + 5, this.offset_y + 5);
                this.countPos();
                this.alpha -= 0.002;
                this.draw();
            };
        };

        function playRains() {
            for (var n = 0; n < rainCount; n++) {
                var rain = rains[n];
                rain.move();
                if (rain.y > window.innerHeight) {
                    context.clearRect(rain.x, rain.y - rain.height, rain.width, rain.height);
                    rains[n] = new MeteorRain();
                    rains[n].init();
                }
            }
            setTimeout("playRains()", 2);
        }

        // Á¨¨Âõõ‰∏™Áà±ÂøÉÂä®Áîª
        var settings2 = {
            particles: {
                length: 500,
                duration: 2,
                velocity: 100,
                effect: -0.75,
                size: 20,
            },
        };

        (function () {
            var b = 0;
            var c = ["ms", "moz", "webkit", "o"];
            for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {
                window.requestAnimationFrame = window[c[a] + "RequestAnimationFrame"];
                window.cancelAnimationFrame = window[c[a] + "CancelAnimationFrame"] || window[c[a] + "CancelRequestAnimationFrame"];
            }
            if (!window.requestAnimationFrame) {
                window.requestAnimationFrame = function (h, e) {
                    var d = new Date().getTime();
                    var f = Math.max(0, 16 - (d - b));
                    var g = window.setTimeout(function () { h(d + f); }, f);
                    b = d + f;
                    return g;
                };
            }
            if (!window.cancelAnimationFrame) {
                window.cancelAnimationFrame = function (d) { clearTimeout(d); };
            }
        })();

        var Point2 = (function () {
            function Point2(x, y) {
                this.x = (typeof x !== 'undefined') ? x : 0;
                this.y = (typeof y !== 'undefined') ? y : 0;
            }
            Point2.prototype.clone = function () { return new Point2(this.x, this.y); };
            Point2.prototype.length = function (length) {
                if (typeof length == 'undefined') return Math.sqrt(this.x * this.x + this.y * this.y);
                this.normalize();
                this.x *= length;
                this.y *= length;
                return this;
            };
            Point2.prototype.normalize = function () {
                var length = this.length();
                this.x /= length;
                this.y /= length;
                return this;
            };
            return Point2;
        })();

        var Particle2 = (function () {
            function Particle2() {
                this.position = new Point2();
                this.velocity = new Point2();
                this.acceleration = new Point2();
                this.age = 0;
            }
            Particle2.prototype.initialize = function (x, y, dx, dy) {
                this.position.x = x;
                this.position.y = y;
                this.velocity.x = dx;
                this.velocity.y = dy;
                this.acceleration.x = dx * settings2.particles.effect;
                this.acceleration.y = dy * settings2.particles.effect;
                this.age = 0;
            };
            Particle2.prototype.update = function (deltaTime) {
                this.position.x += this.velocity.x * deltaTime;
                this.position.y += this.velocity.y * deltaTime;
                this.velocity.x += this.acceleration.x * deltaTime;
                this.velocity.y += this.acceleration.y * deltaTime;
                this.age += deltaTime;
            };
            Particle2.prototype.draw = function (context, image) {
                function ease(t) { return (--t) * t * t + 1; }
                var size = image.width * ease(this.age / settings2.particles.duration);
                context.globalAlpha = 1 - this.age / settings2.particles.duration;
                context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);
            };
            return Particle2;
        })();

        var ParticlePool2 = (function () {
            var particles, firstActive = 0, firstFree = 0, duration = settings2.particles.duration;
            function ParticlePool2(length) {
                particles = new Array(length);
                for (var i = 0; i < particles.length; i++) particles[i] = new Particle2();
            }
            ParticlePool2.prototype.add = function (x, y, dx, dy) {
                particles[firstFree].initialize(x, y, dx, dy);
                firstFree++;
                if (firstFree == particles.length) firstFree = 0;
                if (firstActive == firstFree) firstActive++;
                if (firstActive == particles.length) firstActive = 0;
            };
            ParticlePool2.prototype.update = function (deltaTime) {
                var i;
                if (firstActive < firstFree) for (i = firstActive; i < firstFree; i++) particles[i].update(deltaTime);
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++) particles[i].update(deltaTime);
                    for (i = 0; i < firstFree; i++) particles[i].update(deltaTime);
                }
                while (particles[firstActive].age >= duration && firstActive != firstFree) {
                    firstActive++;
                    if (firstActive == particles.length) firstActive = 0;
                }
            };
            ParticlePool2.prototype.draw = function (context, image) {
                var i;
                if (firstActive < firstFree) for (i = firstActive; i < firstFree; i++) particles[i].draw(context, image);
                if (firstFree < firstActive) {
                    for (i = firstActive; i < particles.length; i++) particles[i].draw(context, image);
                    for (i = 0; i < firstFree; i++) particles[i].draw(context, image);
                }
            };
            return ParticlePool2;
        })();

        (function (canvas) {
            var context = canvas.getContext('2d'),
                particles = new ParticlePool2(settings2.particles.length),
                particleRate = settings2.particles.length / settings2.particles.duration,
                time;

            function pointOnHeart(t) {
                return new Point2(
                    160 * Math.pow(Math.sin(t), 3),
                    130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25
                );
            }

            var image = (function () {
                var canvas = document.createElement('canvas'),
                    context = canvas.getContext('2d');
                canvas.width = settings2.particles.size;
                canvas.height = settings2.particles.size;
                function to(t) {
                    var point = pointOnHeart(t);
                    point.x = settings2.particles.size / 2 + point.x * settings2.particles.size / 350;
                    point.y = settings2.particles.size / 2 - point.y * settings2.particles.size / 350;
                    return point;
                }
                context.beginPath();
                var t = -Math.PI;
                var point = to(t);
                context.moveTo(point.x, point.y);
                while (t < Math.PI) {
                    t += 0.01;
                    point = to(t);
                    context.lineTo(point.x, point.y);
                }
                context.closePath();
                context.fillStyle = '#ff3366';
                context.fill();
                var image = new Image();
                image.src = canvas.toDataURL();
                return image;
            })();

            function render() {
                requestAnimationFrame(render);
                var newTime = new Date().getTime() / 1000,
                    deltaTime = newTime - (time || newTime);
                time = newTime;
                context.clearRect(0, 0, canvas.width, canvas.height);
                var amount = particleRate * deltaTime;
                for (var i = 0; i < amount; i++) {
                    var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());
                    var dir = pos.clone().length(settings2.particles.velocity);
                    particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);
                }
                particles.update(deltaTime);
                particles.draw(context, image);
            }

            function onResize() {
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
            }
            window.onresize = onResize;
            setTimeout(function () {
                onResize();
                render();
            }, 10);
        })(document.getElementById('pinkboard2'));

        // ÊºÇÊµÆÊñáÂ≠óÂä®Áîª
        const colors = [
            "#ff3366", "#ff6699", "#ff0033", "#e6005c",
            "#d9006c", "#c2007c", "#ad008c", "#96009c"
        ];
        var floatCanvas = document.getElementById("canvas");
        var floatCtx = floatCanvas.getContext("2d");
        let count = 1;
        var ww = window.innerWidth;
        var wh = window.innerHeight;
        var hearts = [];

        function initFloatText() {
            requestAnimationFrame(renderFloatText);
            floatCanvas.width = ww;
            floatCanvas.height = wh;
            for (var i = 0; i < 100; i++) {
                hearts.push(new FloatHeart());
            }
        }

        function FloatHeart() {
            this.x = Math.random() * ww;
            this.y = Math.random() * wh;
            this.opacity = Math.random() * 0.5 + 0.5;
            this.vel = {
                x: (Math.random() - 0.5) * 4,
                y: (Math.random() - 0.5) * 4,
            };
            this.targetScale = Math.random() * 0.15 + 0.02;
            this.scale = this.targetScale * Math.random();
        }

        FloatHeart.prototype.update = function (i) {
            this.x += this.vel.x;
            this.y += this.vel.y;
            this.scale += (this.targetScale - this.scale) * 0.01;
            if (this.x - this.width > ww || this.x + this.width < 0) {
                this.scale = 0;
                this.x = Math.random() * ww;
            }
            if (this.y - this.height > wh || this.y + this.height < 0) {
                this.scale = 0;
                this.y = Math.random() * wh;
            }
            this.width = 473.8;
            this.height = 408.6;
        };

        FloatHeart.prototype.draw = function (i) {
            floatCtx.globalAlpha = this.opacity;
            floatCtx.font = `${180 * this.scale}px "ÂæÆËΩØÈõÖÈªë"`;
            floatCtx.fillStyle = colors[i % colors.length];
            floatCtx.fillText(
                "20Â≤ÅÂï¶ÔºÅÁîüÊó•Âø´‰πêÂëÄ!Â∞èÂìíÁßë",
                this.x - this.width * 0.5,
                this.y - this.height * 0.5,
                this.width,
                this.height
            );
        };

        function renderFloatText() {
            floatCtx.clearRect(0, 0, ww, wh);
            for (var i = 0; i < 100; i++) {
                hearts[i].update(i);
                hearts[i].draw(i);
            }
            requestAnimationFrame(renderFloatText);
        }

        initFloatText();
        window.addEventListener("resize", function () {
            ww = window.innerWidth;
            wh = window.innerHeight;
        });
    </script>
</body>
</html>
